---
title: "jigsawR"
subtitle: "Generate Beautiful Jigsaw Puzzles in R"
page-layout: full
---

::: hero-section
# jigsawR {.hero-title}
:::

::: {.hero-section .hero-subtitle}
Generate stunning, mathematically precise jigsaw puzzles with ease. Six puzzle types, infinite possibilities.
:::

```{r}
#| label: setup
#| include: false
# Flexible path: works from project root (Quarto) or quarto/ (RStudio interactive)
setup_path <- if (file.exists("quarto/_setup.R")) "quarto/_setup.R" else "_setup.R"
source(setup_path)
```

```{r}
#| label: hero-puzzle
#| echo: false
#| message: false
#| warning: false
#| fig-align: center
#| out-width: "100%"
#| fig-width: 5
#| fig-height: 5
#| fig-dpi: 300

# Create a visually appealing hexagonal puzzle
# This example demonstrates ALL available parameters for geom_puzzle_hex
ggplot() +
  geom_puzzle_hex(
    # === Aesthetics ===
    aes(fill = after_stat(piece_id)),
    colour = grey(0.1),             # Edge color (all edges)
    linewidth = 0.5,                # Edge thickness
    alpha = NA,                     # Fill transparency (NA = opaque)

    # === Puzzle Geometry ===
    rings = 3,                      # Number of rings (pieces = 3*r*(r-1)+1)
    diameter = 222,                 # Puzzle diameter in mm
    tabsize = 11,                   # Tab size percentage (default: 6)
    jitter = 10,                     # Tab position randomness (default: 4)
    min_tab_size = NULL,            # Minimum tab height in mm (NULL = no limit)
    max_tab_size = NULL,            # Maximum tab height in mm (NULL = no limit)
    seed = 22,                      # Random seed for reproducibility
    offset = 22,                    # Piece separation (0 = interlocked)

    # === Hexagonal Transformations ===
    do_warp = TRUE,                 # Apply circular warping
    do_trunc = FALSE,               # Truncate edge pieces at boundary
    do_circular_border = FALSE,     # Use perfect circular arc borders

    # === Fusion Groups (PILES notation) ===
    fusion_groups = "4-12-13,2-8-19,all-4-12-13-2-8-19",
    fusion_style = "solid",         # "none", "dashed", or "solid"
    fusion_opacity = 0.22,          # Fused edge opacity (0.0-1.0)

    # === Labels ===
    show_labels = TRUE,             # Show piece ID labels
    label_color = "black",          # Label text color
    label_size = NULL,              # Label font size (NULL = auto)

    # === Rendering ===
    bezier_resolution = 22          # Points per bezier curve
  ) +
  scale_fill_viridis_c(option = "plasma", guide = "none") +
  coord_fixed() +
  theme_puzzle() +
  labs(title = "jigsawR") +
  theme(
    plot.title = element_text(
      hjust = 0.5,
      size = 18,
      face = "bold",
      margin = margin(b = 10)
    ),
    plot.background = element_rect(fill = NA, color = NA)
  )
```

## Installation

``` r
# Install from GitHub
devtools::install_github("pjt222/jigsawR")
```

::::::::::::::::::::: feature-grid
::::: feature-card
::: feature-icon
ðŸ§©
:::

::: feature-title
6 Puzzle Types
:::

Rectangular, Hexagonal, Concentric, Voronoi, Random, and SNIC shapes
:::::

::::: feature-card
::: feature-icon
ðŸŽ¨
:::

::: feature-title
Beautiful Palettes
:::

Full viridis color palette support with gradient fills
:::::

::::: feature-card
::: feature-icon
ðŸ“Š
:::

::: feature-title
ggplot2 Integration
:::

Native geom_puzzle\_\*() functions for data visualization
:::::

::::: feature-card
::: feature-icon
ðŸ”—
:::

::: feature-title
Fusion Groups
:::

Merge pieces using PILES notation for custom layouts
:::::

::::: feature-card
::: feature-icon
âš¡
:::

::: feature-title
High Performance
:::

C++ backend with Rcpp for fast puzzle generation
:::::

::::: feature-card
::: feature-icon
ðŸ“±
:::

::: feature-title
Shiny App
:::

Interactive web app for puzzle creation and download
:::::
:::::::::::::::::::::

## Quick Start

```{r}
#| label: quick-start
#| fig-align: center
#| out-width: "60%"

# Generate a 3x4 rectangular puzzle
result <- generate_puzzle(
  type = "rectangular",
  grid = c(3, 4),
  size = c(300, 400),
  seed = 42,
  fill_palette = "viridis"
)

render_puzzle_preview(result)
```

## Gallery Preview

::: puzzle-gallery
```{r}
#| label: gallery-preview
#| echo: false
#| message: false
#| warning: false
#| fig-align: center
p1 <- ggplot() +
  geom_puzzle_rect(
    aes(fill = after_stat(piece_id)),
    cols = 3, rows = 3,
    seed = 42
  ) +
  scale_fill_viridis_c(option = "viridis", guide = "none") +
  coord_fixed() +
  theme_puzzle() +
  labs(title = "Rectangular")

p2 <- ggplot() +
  geom_puzzle_hex(
    aes(fill = after_stat(piece_id)),
    rings = 3, seed = 42
  ) +
  scale_fill_viridis_c(option = "magma", guide = "none") +
  coord_fixed() +
  theme_puzzle() +
  labs(title = "Hexagonal")

p3 <- ggplot() +
  geom_puzzle_conc(
    aes(fill = after_stat(ring)),
    rings = 3, seed = 42
  ) +
  scale_fill_viridis_c(option = "plasma", guide = "none") +
  coord_fixed() +
  theme_puzzle() +
  labs(title = "Concentric")

p4 <- ggplot() +
  geom_puzzle_voronoi(
    aes(fill = after_stat(piece_id)),
    n_cells = 15, seed = 42,
    tabsize = 15, jitter = 3
  ) +
  scale_fill_viridis_c(option = "turbo", guide = "none") +
  coord_fixed() +
  theme_puzzle() +
  labs(title = "Voronoi")

print(p1 + p2 + p3 + p4)
```
:::

[Explore the Gallery â†’](gallery/rectangular.qmd){.btn .btn-primary}

## ggplot2 Integration

Map data to puzzle pieces for creative data visualization:

```{r}
#| label: ggplot2-integration
#| fig-align: center
#| out-width: "60%"

# Create data
data <- data.frame(
  region = 1:7,
  value = c(23, 45, 12, 67, 34, 89, 56)
)

# Visualize with puzzle pieces
ggplot(data) +
  geom_puzzle_hex(
    aes(fill = value),
    rings = 2,
    seed = 123
  ) +
  scale_fill_viridis_c(
    name = "Value",
    option = "plasma"
  ) +
  coord_fixed() +
  theme_minimal() +
  labs(title = "Data as Puzzle Pieces")
```

[Learn More About ggpuzzle â†’](api/ggpuzzle.qmd){.btn .btn-outline-primary}

## PILES Notation

Powerful piece fusion with intuitive syntax:

```{r}
#| label: piles-demo
#| eval: false

# Merge center with ring 1
result <- generate_puzzle(
  type = "hexagonal",
  grid = c(3),
  size = c(200),
  fusion_groups = "center-ring1"
)

# Custom fusion groups
result <- generate_puzzle(
  type = "rectangular",
  grid = c(3, 4),
  size = c(300, 400),
  fusion_groups = "1-2-3,7-8-9,10-11-12"
)
```

[PILES Notation Guide â†’](api/piles-notation.qmd){.btn .btn-outline-primary}

------------------------------------------------------------------------

::: text-center
**Ready to create puzzles?**

[Get Started](getting-started.qmd){.btn .btn-lg .btn-primary} [View on GitHub](https://github.com/pjt222/jigsawR){.btn .btn-lg .btn-outline-secondary}
:::
