% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/jigsawR_clean.R
\name{generate_puzzle}
\alias{generate_puzzle}
\title{Main jigsaw puzzle generation function}
\usage{
generate_puzzle(
  type = "rectangular",
  grid = c(2, 2),
  size = c(200, 200),
  seed = NULL,
  tabsize = 20,
  jitter = 4,
  offset = 0,
  layout = "grid",
  repel_margin = 2,
  repel_max_iter = 100,
  fill_color = "none",
  fills = NULL,
  stroke_width = 1.5,
  colors = NULL,
  palette = NULL,
  palette_invert = FALSE,
  background = "white",
  opacity = 1,
  save_files = FALSE,
  output_dir = "output",
  filename_prefix = NULL,
  do_warp = FALSE,
  do_trunc = FALSE,
  do_circular_border = FALSE,
  center_shape = "hexagon",
  boundary_facing = "outward",
  show_labels = FALSE,
  label_color = "black",
  label_size = NULL,
  fusion_groups = NULL,
  fusion_style = "none",
  fusion_opacity = 0.3,
  point_distribution = "fermat",
  n_corner = 4,
  min_piece_size = NULL,
  min_tab_size = NULL,
  max_tab_size = NULL,
  output = NULL
)
}
\arguments{
\item{type}{Puzzle type: "rectangular", "hexagonal", or "concentric"}

\item{grid}{For rectangular: c(rows, columns). For hexagonal/concentric: c(rings) or just rings}

\item{size}{For rectangular: c(width, height) in mm. For hexagonal/concentric: c(diameter) or just diameter}

\item{seed}{Random seed for reproducibility}

\item{tabsize}{Tab size as percentage (10-40)}

\item{jitter}{Jitter as percentage (0-15)}

\item{offset}{Separation offset (0 = complete puzzle, >0 = separated pieces)}

\item{layout}{Layout algorithm: "grid" (default) or "repel".
"grid" uses regular grid-based positioning.
"repel" uses iterative collision resolution to prevent overlapping.}

\item{repel_margin}{Minimum gap between pieces for repel layout (default: 2mm)}

\item{repel_max_iter}{Maximum iterations for repel algorithm (default: 100)}

\item{fill_color}{Fill color for pieces ("none" for unfilled)}

\item{fills}{Vector of per-piece fill colors (optional, overrides fill_color for palette fills)}

\item{stroke_width}{SVG stroke width (default: 1.5)}

\item{colors}{Vector of colors for pieces (optional, overrides palette)}

\item{palette}{Viridis palette name (NULL = use config default)}

\item{palette_invert}{Logical, if TRUE reverses the palette direction (default: FALSE)}

\item{background}{"none", "white", color name, or list(type="gradient", ...)}

\item{opacity}{Opacity of puzzle pieces (0.0 to 1.0)}

\item{save_files}{TRUE to save SVG files}

\item{output_dir}{Directory for output files}

\item{filename_prefix}{Prefix for output files}

\item{do_warp}{Apply circular warping (hexagonal only)}

\item{do_trunc}{Truncate edge pieces (hexagonal only)}

\item{do_circular_border}{Use perfect circular arc borders (hexagonal: requires do_warp=TRUE; concentric: always available)}

\item{center_shape}{Center piece shape for concentric type: "hexagon" or "circle"}

\item{boundary_facing}{Direction the circular arc faces (concentric only): "outward" (convex) or "inward" (concave)}

\item{show_labels}{Logical; if TRUE, display piece ID labels at piece centers}

\item{label_color}{Color for piece labels (default: "black")}

\item{label_size}{Font size for labels in mm (default: auto-calculated based on piece size)}

\item{fusion_groups}{List of piece ID vectors to fuse, or string like "(1,2),(7,8,9)"}

\item{fusion_style}{Style for fused internal edges: "none" (invisible), "dashed", "solid"}

\item{fusion_opacity}{Opacity for fused edges when style != "none" (0.0 to 1.0)}

\item{point_distribution}{Point distribution method for voronoi puzzles: "fermat", "uniform", or "jittered"}

\item{n_corner}{Number of corners for base polygon in random shape puzzles (default: 4 for rectangle)}

\item{min_piece_size}{Minimum piece size constraint for random shape puzzles (default: NULL for auto)}

\item{min_tab_size}{Minimum absolute tab size in units (default: NULL for no limit).
Prevents tabs from becoming too small on short edges. Only applies to voronoi/random types.}

\item{max_tab_size}{Maximum absolute tab size in units (default: NULL for no limit).
Prevents tabs from becoming too large on long edges. Only applies to voronoi/random types.}

\item{output}{DEPRECATED: Use offset parameter instead}
}
\value{
List with svg_content, pieces, canvas_size, parameters, and fusion_data (if applicable)
}
\description{
Single entry point for all puzzle generation with clean, reproducible output.
Uses the unified pipeline: piece generation -> positioning -> rendering.
}
